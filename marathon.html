<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>半马4周训练计划</title>
  <style>
    body {
      font-family: "Helvetica", sans-serif;
      padding: 20px;
      line-height: 1.6;
      background: #f8f9fa;
      color: #333;
    }
    h1 {
      text-align: center;
    }
    table {
      width: 100%;
      max-width:1170px;
      margin: 0 auto;
      border-collapse: collapse;
      margin-top: 1em;
      background: #fff;
      box-shadow: 0 0 8px rgba(0,0,0,0.1);
    }
    th, td {
      border: 1px solid #ddd;
      padding: 12px;
      text-align: left;
    }
    th {
      background-color: #007bff;
      color: white;
    }
    tr:nth-child(even) {
      background-color: #f1f1f1;
    }
    tr.done {
      background-color: #27d38b;
    }
    tr.last {
      background-color: #dd88ff;
    }
    .core {
      background-color: #ffc107;
      font-weight: bold;
    }
    .longrun {
      background-color: #28a745;
      color: white;
      font-weight: bold;
    }
    .race {
      background-color: #dc3545;
      color: white;
      font-weight: bold;
    }
  </style>
</head>
<body>

<h1>半马训练计划（4周）</h1>

<table>
  <thead>
    <tr>
      <th>日期</th>
      <th>星期</th>
      <th>训练内容</th>
    </tr>
  </thead>
  <tbody>
    <tr><td>5月1日</td><td>星期四</td><td>间歇跑：1km 热身 + 400m 快跑 + 400m 慢跑 ×4组 + 1km 放松</td></tr>
    <tr><td>5月2日</td><td>星期五</td><td class="rest">休息</td></tr>
    <tr><td>5月3日</td><td>星期六</td><td class="longrun">长距离：10km 慢跑</td></tr>
    <tr><td>5月4日</td><td>星期日</td><td class="rest">休息</td></tr>
    <tr><td>5月5日</td><td>星期一</td><td>节奏跑：6km 配速 8'50"/km</td></tr>
    <tr><td>5月6日</td><td>星期二</td><td class="core">核心训练：平板支撑、俄罗斯转体、登山跑 ×3组</td></tr>
    <tr><td>5月7日</td><td>星期三</td><td>慢跑：5km 放松</td></tr>
    <tr><td>5月8日</td><td>星期四</td><td>间歇跑：1km 热身 + 800m 快跑 + 400m 慢跑 ×3组 + 1km 放松</td></tr>
    <tr><td>5月9日</td><td>星期五</td><td class="rest">休息</td></tr>
    <tr><td>5月10日</td><td>星期六</td><td class="longrun">长距离：12~14km 跑走结合</td></tr>
    <tr><td>5月11日</td><td>星期日</td><td class="rest">休息</td></tr>
    <tr><td>5月12日</td><td>星期一</td><td>节奏跑：7km 配速 8'45"/km</td></tr>
    <tr><td>5月13日</td><td>星期二</td><td class="core">核心训练：平板支撑、俄罗斯转体、登山跑 ×3组</td></tr>
    <tr><td>5月14日</td><td>星期三</td><td>慢跑：6km</td></tr>
    <tr><td>5月15日</td><td>星期四</td><td>间歇跑：400m 快跑 + 400m 慢跑 ×5组</td></tr>
    <tr><td>5月16日</td><td>星期五</td><td class="rest">休息</td></tr>
    <tr><td>5月17日</td><td>星期六</td><td class="longrun">长距离：16~18km 模拟补给</td></tr>
    <tr><td>5月18日</td><td>星期日</td><td class="rest">休息</td></tr>
    <tr><td>5月19日</td><td>星期一</td><td class="core">核心训练：平板支撑、登山跑 ×3组</td></tr>
    <tr><td>5月20日</td><td>星期二</td><td>节奏跑 6~7km（配速 8'45"）</td></tr>
    <tr><td>5月21日</td><td>星期三</td><td>－（恢复或轻松散步）</td></tr>
    <tr><td>5月22日</td><td>星期四</td><td>间歇：400m 快跑 ×4 + 慢跑恢复</td></tr>
    <tr><td>5月23日</td><td>星期五</td><td>慢跑 5km + 冲刺 2组</td></tr>
    <tr><td>5月24日</td><td>星期六</td><td class="longrun">长距离模拟：14~16km（慢跑+走路，练习补给）</td></tr>
    <tr><td>5月25日</td><td>星期日</td><td class="rest">休息</td></tr>
    <tr><td>5月26日</td><td>星期一</td><td class="core">核心训练（轻量）</td></tr>
    <tr><td>5月27日</td><td>星期二</td><td class="rest">－（轻松活动或完全休息）</td></tr>
    <tr><td>5月28日</td><td>星期三</td><td>慢跑 4km</td></tr>
    <tr><td>5月29日</td><td>星期四</td><td>－（放松、热身、拉伸）</td></tr>
    <tr><td>5月30日</td><td>星期五</td><td>节奏跑 5km</td></tr>
    <tr><td>5月31日</td><td>星期六</td><td class="race">🏁 比赛日：21.1km 半马（加油！）</td></tr>
  </tbody>
</table>
 <script>  
  const parseChineseDate = {
    toDate: (str, mode, year = new Date().getFullYear()) => {
      let m, d, y = year;
      if (mode === "full" && /年/.test(str)) {
        [, y, m, d] = str.match(/(\d+)年(\d+)月(\d+)日/) || [];
      } else if (mode === "simple") {
        [, m, d] = str.match(/(\d+)月(\d+)日/) || [];
      } else {
        throw new Error("invalid mode");
      }
      if (!m || !d) throw new Error("invalid date format");
      const date = new Date(y, m - 1, d);
      if (isNaN(date)) throw new Error("invalid date");
      return date.getTime();
    }
  };

  const insertDate = (rows) => {
    rows.forEach((row, index) => {
      row.setAttribute('data-date', parseChineseDate.toDate(row.children[0].innerText, 'simple'));
    });
  };

  const flagDone = (rows) => {
    let lastDoneIndex = -1;
    for (let index = 0; index < rows.length; index++) {
      const row = rows[index];
      const row_time = row.getAttribute('data-date');
      const today = new Date().getTime();
      if (row_time <= today) {
        row.classList.add('done');
        lastDoneIndex = index;
      } else {
        break;
      }
    }
    if (lastDoneIndex >= 0) {
      rows[lastDoneIndex].classList.add('last');
    }
  };

  document.addEventListener('DOMContentLoaded', () => {
    const rows = document.querySelectorAll('table tbody tr');
    insertDate(rows);
    flagDone(rows);
  });
 </script>
</body>
</html>
